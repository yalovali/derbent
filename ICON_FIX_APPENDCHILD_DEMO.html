<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Fix - appendChild Solution</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .demo-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2196F3;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #2196F3;
            padding-bottom: 10px;
        }
        .icon-demo {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 16px;
            height: 16px;
            margin: 5px;
            border: 1px solid #ddd;
            padding: 2px;
        }
        .user-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f9f9f9;
            margin: 5px 0;
            border-radius: 4px;
        }
        code {
            background: #263238;
            color: #aed581;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 13px;
        }
        pre {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .success {
            color: #4caf50;
            font-weight: bold;
        }
        .error {
            color: #f44336;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="demo-section">
        <h1>✅ Icon Fix - appendChild Solution</h1>
        <p>This demonstrates how user icons now render correctly using <code>appendChild()</code> instead of <code>innerHTML</code>.</p>
    </div>

    <div class="demo-section">
        <h2>Problem: Shadow DOM blocks innerHTML</h2>
        <p>Vaadin's <code>&lt;vaadin-icon&gt;</code> web component has shadow DOM that ignores innerHTML:</p>
        <pre>&lt;vaadin-icon&gt;
  #shadow-root (closed)
    &lt;!-- Internal rendering --&gt;
  &lt;!-- innerHTML is ignored --&gt;
&lt;/vaadin-icon&gt;</pre>
        <p class="error">❌ Result: Nothing renders</p>
    </div>

    <div class="demo-section">
        <h2>Solution: Append SVG as child element</h2>
        <p>Child elements DO render even with shadow DOM:</p>
        <pre>&lt;vaadin-icon&gt;
  #shadow-root (closed)
    &lt;!-- Internal rendering --&gt;
  &lt;div&gt; &lt;!-- Light DOM child - RENDERS! --&gt;
    &lt;svg&gt;...&lt;/svg&gt;
  &lt;/div&gt;
&lt;/vaadin-icon&gt;</pre>
        <p class="success">✅ Result: SVG displays correctly</p>
    </div>

    <div class="demo-section">
        <h2>Live Demo</h2>
        <p>User icons with initials (simulating the actual output):</p>
        
        <div class="user-item">
            <div class="icon-demo">
                <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="8" cy="8" r="8" fill="#2196F3"/>
                    <text x="8" y="8" font-family="Arial, sans-serif" font-size="6" 
                          font-weight="bold" fill="white" text-anchor="middle" 
                          dominant-baseline="middle">JD</text>
                </svg>
            </div>
            <span>John Doe</span>
        </div>

        <div class="user-item">
            <div class="icon-demo">
                <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="8" cy="8" r="8" fill="#9C27B0"/>
                    <text x="8" y="8" font-family="Arial, sans-serif" font-size="6" 
                          font-weight="bold" fill="white" text-anchor="middle" 
                          dominant-baseline="middle">JS</text>
                </svg>
            </div>
            <span>Jane Smith</span>
        </div>

        <div class="user-item">
            <div class="icon-demo">
                <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="8" cy="8" r="8" fill="#FF9800"/>
                    <text x="8" y="8" font-family="Arial, sans-serif" font-size="6" 
                          font-weight="bold" fill="white" text-anchor="middle" 
                          dominant-baseline="middle">BJ</text>
                </svg>
            </div>
            <span>Bob Johnson</span>
        </div>
    </div>

    <div class="demo-section">
        <h2>Code Changes</h2>
        
        <h3>Before (didn't work):</h3>
        <pre>final Icon icon = new Icon();
icon.getElement().setProperty("innerHTML", svgContent);
// Shadow DOM ignores this ❌</pre>

        <h3>After (works):</h3>
        <pre>final Icon icon = new Icon();
final Element wrapper = new Element("div");
wrapper.setProperty("innerHTML", svgContent);
icon.getElement().appendChild(wrapper);
// Child element renders ✅</pre>
    </div>

    <div class="demo-section">
        <h2>Test Results</h2>
        <ul>
            <li class="success">✅ CUserIconTest: 12/12 passing</li>
            <li class="success">✅ CUserSvgIconTest: 6/6 passing</li>
            <li class="success">✅ CUserIconRenderingTest: 4/4 passing</li>
            <li class="success">✅ Total: 22/22 tests passing</li>
        </ul>
    </div>
</body>
</html>
